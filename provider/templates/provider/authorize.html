{% load scope %}
{% load url from future %}

<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Ligonier</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
        <!-- CSS Reset -->
        <link rel="stylesheet" href="https://s3.amazonaws.com/ligonier-static-media-test/provider/css/normalize.min.css">
        <!-- Main Styles -->
        <link rel="stylesheet" href="https://s3.amazonaws.com/ligonier-static-media-test/provider/css/style.css">
    </head>
    <body>
        <div class="wrapper">

            <header>
                <img src="https://s3.amazonaws.com/ligonier-static-media-test/provider/img/LM-logo@2x.png" class="centered">
            </header>

            {% if not error %}
                <p>{{ client.name }} would like to access your Ligonier Account with the following permissions:</p>
                <ul>
                    {% for permission in oauth_data.scope|scopes %}
                        <li>
                            {% if permission == "read" %}
                            Read, but not change, limited information such as your name, email address, the items in your Learning Library (note: does not allow access to payment information).
                            {% else %}
                            Change limited information.
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                <form method="post" action="{% url "oauth2:authorize" %}">
                    {% csrf_token %}
                    {{ form.errors }}
                    {{ form.non_field_errors }}
                    <fieldset>
                        <div style="display: none;" />
                            <select type="select" name="scope" multiple="multiple">
                            {% for scope in oauth_data.scope|scopes %}
                                <option value="{{ scope }}" selected="selected">{{ scope }}</option>
                            {% endfor %}
                            </select>
                        </div>
                        <span class="button-group">
                            <input type="submit" class="btn login large danger" value="Cancel" />
                            <input type="submit" class="btn login large primary" name="authorize" value="Authorize" />
                        </span><!-- .button-group -->
                    </fieldset>
                </form>
                <p class="text-center">
                    <a href="/account/logout/">Log Out</a>
                </p>
            {% else %}
                {{ error }}
                {{ error_description }}
            {% endif %}
            
        </div><!-- .wrapper -->

        <script src="https://s3.amazonaws.com/ligonier-static-media-test/provider/js/app-ligonier.js"></script>
    </body>
</html>
